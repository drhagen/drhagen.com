
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Personal website of David R Hagen, scientific software engineer">
      
      
        <meta name="author" content="David Hagen">
      
      
        <link rel="canonical" href="https://drhagen.com/blog/sane-equality/">
      
      
        <link rel="prev" href="../when-sequences-go-bad/">
      
      
        <link rel="next" href="../the-missing-11th-of-the-month/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>Sane Equality - David R Hagen</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#defining-equality" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="David R Hagen" class="md-header__button md-logo" aria-label="David R Hagen" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.96 11.31C10.82 8.1 11.5 6 13 6s2.18 2.1 3.04 5.31C17 14.92 18.1 19 22 19v-2c-2.2 0-3-2.46-4.03-6.2C17.08 7.46 16.15 4 13 4c-3.15 0-4.08 3.46-4.97 6.8C7.03 14.54 6.2 17 4 17V2H2v20h20v-2H4v-1c3.9 0 5-4.08 5.96-7.69Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            David R Hagen
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Sane Equality
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="yellow"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="yellow" data-md-color-accent="deep-orange"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="David R Hagen" class="md-nav__button md-logo" aria-label="David R Hagen" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.96 11.31C10.82 8.1 11.5 6 13 6s2.18 2.1 3.04 5.31C17 14.92 18.1 19 22 19v-2c-2.2 0-3-2.46-4.03-6.2C17.08 7.46 16.15 4 13 4c-3.15 0-4.08 3.46-4.97 6.8C7.03 14.54 6.2 17 4 17V2H2v20h20v-2H4v-1c3.9 0 5-4.08 5.96-7.69Z"/></svg>

    </a>
    David R Hagen
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cv/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7 7h2v2H7V7m0 4h2v2H7v-2m0 4h2v2H7v-2m10 2h-6v-2h6v2m0-4h-6v-2h6v2m0-4h-6V7h6v2Z"/></svg>
  
  <span class="md-ellipsis">
    CV
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-8 5H9v2c0 1.1-.9 2-2 2 1.1 0 2 .9 2 2v2h2v2H9c-1.1 0-2-.9-2-2v-1c0-1.1-.9-2-2-2v-2c1.1 0 2-.9 2-2V8c0-1.1.9-2 2-2h2v2m8 5c-1.1 0-2 .9-2 2v1c0 1.1-.9 2-2 2h-2v-2h2v-2c0-1.1.9-2 2-2-1.1 0-2-.9-2-2V8h-2V6h2c1.1 0 2 .9 2 2v1c0 1.1.9 2 2 2v2Z"/></svg>
  
  <span class="md-ellipsis">
    Software
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 5v14H4V5h16m0-2H4c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2m-2 12H6v2h12v-2m-8-8H6v6h4V7m2 2h6V7h-6v2m6 2h-6v2h6v-2Z"/></svg>
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#defining-equality" class="md-nav__link">
    <span class="md-ellipsis">
      Defining Equality
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design-options" class="md-nav__link">
    <span class="md-ellipsis">
      Design Options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unsafe-equality" class="md-nav__link">
    <span class="md-ellipsis">
      Unsafe equality
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-safe-equality" class="md-nav__link">
    <span class="md-ellipsis">
      Type-safe equality
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#equal-in-what-way" class="md-nav__link">
    <span class="md-ellipsis">
      Equal in what way?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mutable-equality" class="md-nav__link">
    <span class="md-ellipsis">
      Mutable equality
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#equality-is-everywhere" class="md-nav__link">
    <span class="md-ellipsis">
      Equality is everywhere
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unions-require-special-care" class="md-nav__link">
    <span class="md-ellipsis">
      Unions require special care
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusions" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../" class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
                  <span class="md-ellipsis">
                    Back to index
                  </span>
                </a>
              </div>
            </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    Metadata
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg>
                        <time datetime="2015-09-14 00:00:00" class="md-ellipsis">September 14, 2015</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg>
                          <span class="md-ellipsis">
                            in
                            
                              <a href="../category/programming/">programming</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg>
                          <span class="md-ellipsis">
                            
                              12 min read
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        


  <h1>Sane Equality</h1>

<p>Equality: every programming language has it, the <code>==</code> syntax is as universal as <code>1+1</code>, and it works almost the same in every language. When the left and right operands are the same type, equality is easy. No one questions that <code>1==1</code> evaluates to <code>true</code> or that <code>"a"=="b"</code> evaluates to <code>false</code>. This post is about what to do when the operands are different types. What should <code>1=="1"</code> be? Or what should <code>Circle(1,2,2)==Point(1,2)</code> be? Or what should <code>ColoredPoint(1,2,red)==Point(1,2)</code> be?</p>
<!-- more -->

<h2 id="defining-equality">Defining Equality</h2>
<p>When defining how equality should work, it is helpful to think about what equality means. If two values are equal, that means that one value can be substituted for the other in <em>some</em> sense. Some programming languages flagrantly disobey this rule; they will say that two values are equal even if they cannot be used in the same way at all. The classic member of this club is Javascript, which <a href="https://dorey.github.io/JavaScript-Equality-Table/">returns equals for numerous unrelated values</a>.</p>
<p>It may be tempting to restrict equality to absolute indistinguishability—two objects are equal only if they can replace each other in every possible case. And for immutable values without inheritance, this is a clean choice with little drawback. It can be generated automatically for user-defined types. But as I'll show later, mutable objects and values satisfying multiple types may actually need several parallel definitions of equality. It is often not sufficient to ask if two objects are equal. One must ask: equal in what way?</p>
<h2 id="design-options">Design Options</h2>
<p>When two different types are compared, there are a few options available to the language designer:</p>
<ol>
<li>Evaluate to <code>false</code></li>
<li>Convert them to a common type</li>
<li>Compare the bits in memory</li>
<li>Throw an error</li>
<li>Return a sentinel value</li>
</ol>
<h2 id="unsafe-equality">Unsafe equality</h2>
<p>Most of the professional managed programming languages like Python, Java, C#, Scala, and Ceylon take option #1 all say that <code>1!="1"</code>. In a naive sense, this is entirely correct because an integer and a string are not even comparable. But if they are incomparable, why allow this construction at all? This is not a novel observation. This is a <a href="https://stackoverflow.com/questions/19742527/why-has-scala-no-type-safe-equals-method">common</a> <a href="https://rickyclarkson.blogspot.com/2006/12/making-equalsobject-type-safe.html">source</a> of hidden bugs, especially annoying in statically typed languages, which otherwise catch an incorrect mixing of types. Some IDEs will mark these with a warning, lessening the problem.</p>
<p>Returning <code>false</code> on incomparable types implies that equality is defined for all types. In these languages, the <code>Anything</code> type has an <code>equals</code> method and usually defaults to reference equality for user-defined classes.</p>
<p>Many scripting languages, like Perl, R, and Javascript take option #2 and say that <code>1</code> cannot be compared to <code>"1"</code>, but they convert the number to a string and then compare the strings, giving <code>1=="1"</code> but <code>1!="2"</code>. This is worse than always returning <code>false</code>. If equality is to mean anything, it has to mean that <code>a==b</code> implies that <code>a</code> and <code>b</code> can be used in place of each other in some sense. But a <code>"1"</code> cannot be used in the same way as a <code>1</code>. It is true that <code>1+1</code> is <code>2</code>, but <code>"1"+"1"</code> is not <code>2</code>. At least, <a href="https://www.xkcd.com/1537/">it better not be</a>!</p>
<p>In rare cases, programming languages like Matlab will allow two types to be compared as if they are the same type even if they are not. They see option #3 not as a pitfall, but as an hammock. In Matlab, <code>1!="1"</code> but <code>49=="1"</code>, because <code>"1"</code> is the 49th ASCII character. It should not come as surprise to anyone following this blog, that I think such a design is an abomination. It will get no further attention here.</p>
<h2 id="type-safe-equality">Type-safe equality</h2>
<p>Comparing things of different types requires that the types be available at runtime. Languages that are statically compiled without types, like C, C++, and Rust, must choose option #4 and fail to compile. This is called type-safe equality and it prevents comparing things that cannot be compared.</p>
<p>Assuming that we want a trait to define the interface for equality, there are several ways to design it. One way is with an instance method that only accepts an argument of the same type as the implementing class:</p>
<div class="highlight"><pre><span></span><code>trait Equatable[in Self &lt;: Equatable[Self]]:
  # Assume that == and != somehow desugar to equals and not_equals
  formal def equals(that: Self) -&gt; Boolean
  def not_equals(that: Self) -&gt; Boolean:
    return not equals(that)

class Point(x: Float, y: Float) extends Equatable[Point]:
  actual def equals(that: Point):
    return this.x == that.x and this.y == that.y

class Circle(x: Float, y: Float, r: Float) extends Equatable[Circle]:
  actual def equals(that: Circle):
    return this.x == that.x and this.y == that.y and this.r == that.r
</code></pre></div>
<p><a href="https://rosstate.org/publications/shapes/">Like all shape traits</a>, it is up to the user to correctly pass the current type as the type parameter. Rust, which uses this design, also magically defaults the type parameter to the current class, which is a nice touch.</p>
<p>This provides a totally type-safe equality:</p>
<div class="highlight"><pre><span></span><code># All of these are true
Point(1,2) == Point(1,2)
Circle(1,2,2) == Circle(1,2,2)

# These all are compile errors
Point(1,2) == Circle(1,2)
Circle(1,2) == Point(1,2)
Point(1,2):Anything == Circle(1,2):Anything
</code></pre></div>
<p>One cannot accidentally compare two objects that are incomparable.</p>
<p>An alternative solution is accept option #5 and return a sentinel value, say <code>null</code>, when two objects are incomparable. This is also type-safe assuming that the <code>if</code> statement won't accept <code>null</code> (which it shouldn't!). This forces the programmer to recognize the incomparable case, while still leaving the possibility of converting the <code>null</code> into a <code>false</code> if he wants to. Some languages, like Ceylon, have a nice operator for converting <code>null</code>s called <code>else</code>. One could write <code>1=="1" else false</code> to recover the type-unsafe behavior, but in a type-safe way. The formal method <code>equals</code> above assumes that it is type-safe. If I provided a <code>null</code>-returning equality, I would bake it into the trait so that a user extending <code>Equatable</code> would only have to write one method.</p>
<div class="highlight"><pre><span></span><code>trait Equatable[Self &lt;: Equatable[Self]]:
  def equals_or_null[That](that: That) -&gt; Boolean|Null:
    if That &lt;: Self:
      return this == that
    else:
      return null
</code></pre></div>
<p>Note that this method grabs the static type of <code>that</code> and uses it to see if normal equals would work. Not all languages allow the type parameter to be queried at runtime like this. Ceylon allows it, but Scala does not. Some magical type computation could probably ensure that the return type was <code>Boolean</code> rather than <code>Boolean|Null</code> whenever the types were comparable, but that is beyond the scope of this post.</p>
<h2 id="equal-in-what-way">Equal in what way?</h2>
<p>One thing that is overlooked by every programming language I have used is how inheritance interacts with equality. Conceptually, when <code>B</code> inherits <code>A</code>, objects of type <code>B</code> now have two kinds of equality. They can be equal as <code>B</code>s or they can be equal as <code>A</code>s.</p>
<p>Let's add another class, this time with inheritance involved:</p>
<div class="highlight"><pre><span></span><code>class ColoredPoint(x: Float, y: Float, color: Color)
    extends Point(x,y) and Equatable[ColoredPoint]:
  new def equals(that: ColoredPoint):
    return this.x == that.x and this.y == that.y and this.color == that.color
</code></pre></div>
<p>The <code>new</code> keyword works like it does in C#; it introduces a new method to hide an existing one. The hiding is partial; the new method is called only if the static type of the object and the argument are both <code>ColoredPoint</code>.</p>
<p>Before we continue, let's remember what inheritance is for. Inheritance allows us to pass in instances of <code>ColoredPoint</code> to code that is expecting instances of <code>Point</code> and that code needs to work exactly like it had received a real instance of <code>Point</code>. In most languages, the equality operator is a virtual method, which means that this is true:</p>
<div class="highlight"><pre><span></span><code># In most languages, but not the one espoused here
ColoredPoint(1,2,colors.red):Point != ColoredPoint(1,2,colors.blue):Point
</code></pre></div>
<p>Even when the static types of the objects are Points, they are not compared in their <code>Point</code>ness, but in their <code>ColoredPoint</code>ness. This matters because code that receives two <code>Point</code>s is expecting their equality to be determined entirely by the values of <code>x</code> and <code>y</code>, not some totally unrelated property that may not have even been defined when the code was first written.</p>
<p>If it is a virtual method, it is also not symmetric:</p>
<div class="highlight"><pre><span></span><code># In most languages, but not the one espoused here
ColoredPoint(1,2,colors.red) != Point(1,2)
Point(1,2) == ColoredPoint(1,2,colors.red)
</code></pre></div>
<p>This happens because each <code>equals</code> accepts <code>Anything</code> and then tests is the type is compatible for testing. When the method is on a <code>Point</code>, it is compatible with accepting a <code>ColoredPoint</code>, but not vice versa.</p>
<p>By using method hiding, my implementation has the expected behavior:</p>
<div class="highlight"><pre><span></span><code># narrow
ColoredPoint(1,2,colors.red):Point == ColoredPoint(1,2,colors.blue):Point

# symmetric
Point(1,2) == ColoredPoint(1,2,colors.blue)
ColoredPoint(1,2,colors.blue) == Point(1,2)
</code></pre></div>
<p>Doing the explicit casting in the narrow example above is rarely used. Where this really matters is functions that expect an instance of the base class like:</p>
<div class="highlight"><pre><span></span><code>def do_points_overlap(p1: Point, p2: Point) -&gt; Boolean:
  return p1 == p2
</code></pre></div>
<p>The typical behavior does not do the right thing here if <code>p1</code> and <code>p2</code> are <code>ColoredPoint</code>s.</p>
<h2 id="mutable-equality">Mutable equality</h2>
<p>In an inheritance tree, which version of <code>equals</code> gets chosen is determined by the static type we are currently working with. But mutable objects have two kinds of equality, reference equality and value equality. These two mutable arrays <code>a1 = Array(1,2,3)</code> and <code>a2 = Array(1,2,3)</code> have equal values, but are not indistinguishable. For all operations that read from the arrays, they are the same, but operations that write to the arrays reveal that <code>a1</code> and <code>a2</code> are not the same object. Many programming languages provide a separate operator, say <code>===</code>, to do reference equality. This operation can be, and probably should be, baked into the language. There is exactly one correct way to compare references (their memory pointers are equal) and it requires information often hidden from the user (their memory pointers).</p>
<p>The language could provide a trait that implements reference equality:</p>
<div class="highlight"><pre><span></span><code>trait Identifiable[Self &lt;: Identifiable[Self]] extends Equatable[Self]:
  actual def equals(that: Self) -&gt; Boolean:
    # magical implementation

class MovablePoint(var x: Float, var y: Float)
    extends Identifiable[MovablePoint]:
  pass
</code></pre></div>
<p>Here there is no special syntax. It is a simple extension of <code>Equatable</code>. If one's type does not implement its own <code>equals</code> method, it will inherit it from <code>Identifiable</code> so that <code>MovablePoint(1,2) != MovablePoint(1,2)</code>. If it implements it's own <code>equals</code> to do value equality, we can recover the reference equality by casting to the <code>Identifiable</code> trait like this: <code>MovablePoint(1,2):Identifiable[MovablePoint] != MovablePoint(1,2)</code>.</p>
<p>Downcasting to <code>Identifiable</code> every time we want reference equality is very inconvenient. A better solution would be to move <code>Identifiable</code> out of the <code>Equatable</code> hierarchy entirely. Sure, reference equality can be used as the main equality, but that is not necessarily how the user wants it. Let the user specify how he wants equality to work on his object.</p>
<div class="highlight"><pre><span></span><code>trait Identifiable[Self &lt;: Identifiable[Self]]:
  # Assume that === desugars to identical
  def identical(that: Self) -&gt; Boolean:
    # magical implementation

class MovablePoint(var x: Float, var y: Float)
    extends Identifiable[MovablePoint] &amp; Equatable[MoveablePoint]:
  actual def equals(that: MoveablePoint):
    return this.x == that.x and this.y == that.y
</code></pre></div>
<p>We could have chosen to delegate to reference equality, but didn't. We now have two operators <code>==</code> and <code>===</code> that do different things for this type. We have chosen to have <code>==</code> on immutable objects and mutable objects do value comparison. In one way, this is a good choice because the user likely expects the operator to do the same thing. In another way, this is a bad choice because now <code>==</code> is not a stable property of mutable objects. It cannot be used in contexts where the equality must be stable, such as in sets, dictionary keys, or hash tables. Perhaps this is ok as long as <code>==</code> is used for transitory comparisons and the correct operation is aliased to a different operation, say <code>stable_equals</code>, which is used in collections. The language would be wise to provide metaclasses for immutable and mutable objects that implement this all correctly.</p>
<h2 id="equality-is-everywhere">Equality is everywhere</h2>
<p>And speaking of collections, equality is not just about the behavior of the nice syntax. If it was just about the behavior of <code>==</code>, then we could just provide all the possibilities: <code>=!=</code> for an equals that returned <code>false</code> and <code>=?=</code> for an equals that returned <code>null</code>. The issue is so much bigger because equality is baked into collections, like <code>Sequence</code> and <code>Set</code>.</p>
<p>Consider <code>Set</code> first: all the elements are unique; none of the elements are equal to each other. But this begs the question, equal in what way? If I have a <code>Set[Point]</code>, I am probably expecting that <code>ColoredPoint(1,2,colors.red)</code> and <code>ColoredPoint(1,2,colors.blue)</code> are not both in there because those are equal as <code>Point</code>s. In Scala and languages like it, they both most certainly can be in there.</p>
<p>Consider the <code>contains</code> method on <code>Sequence</code>. The signature in Scala and friends is <code>contains(element: Anything)</code>. Here is the type-unsafe equals rearing its ugly head again. You can have <code>List(1,2,3).contains("foo")</code> quietly evaluate to <code>false</code>. (<a href="https://scalapuzzlers.com/#pzzlr-040">Famously in Scala</a>, <code>List(1,2,3).toSet()</code> will also evaluate to <code>false</code> due to a confluence of design flaws, one of which is type-unsafe <code>equals</code>.) A better design of <code>contains</code> takes a type parameter that answers that question: equal in what way?</p>
<div class="highlight"><pre><span></span><code>class Sequence[Element]:
  def contains[That &lt;: Equatable[Element]](that: That):
    for element in this:
      if element == that:
        return true
    return false
</code></pre></div>
<p>Note that <code>That</code> must be a supertype of <code>Element</code>, which is implied by it being a subtype of the contravariant <code>Equatable[Element]</code>. You can ask a sequence of colored points if it contains a particular point, but you can't ask a sequence of points if it contains a particular colored point, because its elements don't necessarily understand color.</p>
<h2 id="unions-require-special-care">Unions require special care</h2>
<p>One place where type-safe equals gets a little messy is when dealing with unions, like <code>Circle|Point</code>. Consider the following setup:</p>
<div class="highlight"><pre><span></span><code>val circle:Circle|Point = Circle(1,2,2)
val point:Circle|Point = Point(1,2)
</code></pre></div>
<p>We would expect that <code>circle</code> and <code>point</code> could be compared because they have the same static type. However, neither <code>equals</code> method will accept an argument of type <code>Circle|Point</code>, because neither class knows how to deal with the other.</p>
<p>The solution is to remember that <code>Union</code> is itself a class. It is nice when it is treated specially by the language, but as a container type, it can have its own methods. The <code>equals</code> method on <code>Union</code> needs to check if the dynamic types fall into the same branch. If they don't, return <code>false</code>; otherwise, dispatch to the branch that they satisfy.</p>
<div class="highlight"><pre><span></span><code>class Union[Left, Right](left: Left, right: Right) extends Equatable[Left|Right]:
  actual def equals(that: Left|Right):
    switch [this, that]:
      [Left&amp;Right, Left&amp;Right]:
        return this as Left == that as Left and this as Right == that as Right
      [Left, Left]:
        return this == that # this and that now have static type Left
      [Right, Right]:
        return this == that # this and that now have static type Right
      _:
        return false
</code></pre></div>
<p>The first condition covers the possibility that the arguments satisfy both <code>Left</code> and <code>Right</code>. Without this case, the union would be asymmetric. If <code>this</code> and <code>that</code> satisfied <code>A&amp;B</code>, then <code>this:A|B==that:A|B</code> would call <code>A.equals(A)</code> while <code>this:B|A==that:B|A</code> would call <code>B.equals(B)</code>. My version always calls them both, though in different orders, but that is less problematic.</p>
<h2 id="conclusions">Conclusions</h2>
<p>The issue of syntax, such as whether <code>==</code> should ever mean value equality or whether <code>==</code> should always be a stable equality, is secondary to the problem of building a hierarchy of sane equals. I think that there should be traits with names like <code>Equatable</code> for value equality, <code>Identifiable</code> for reference equality, and <code>Collectible</code> for stable equality. Each of these should have members <code>value_equals</code>, <code>reference_equals</code>, and <code>stable_equals</code>. They are defined for whatever classes on which they make sense.</p>
<p>Once that is established, then we decide what to do with the syntax. In all the code where it really matters, the method name should be used directly. The <code>==</code> operator should point to whichever method is the most intuitive equality for that type. I think that <code>===</code> should point to <code>reference_equals</code>. I am on the fence about whether or not <code>value_equals</code> should get its own operator; it really depends on how many mutable classes I think should have <code>==</code> point to reference equality. I definitely don't think that <code>stable_equals</code> should gets its own operator because it should only be used with collections libraries, not user code.</p>
<p>And as for what to do with incomparables, I would throw an error for the main operators, but provide methods on the respective traits for returning <code>false</code> and <code>null</code>. Maybe not even methods on the traits, but as obscure library functions.</p>
<p>As difficult as this may be to believe, there is much I have left unsaid on this topic. Like all recursive types, <code>Equatable</code> and friends have deep problems integrating into a static type system, particularly because it is easy to get infinite recursion when dealing with generic container types (something I ignored while talking about union types). Ross Tate has an <a href="https://www.cs.cornell.edu/~blg59/resources/doc/effing-bound-polymorphism.pdf">interesting solution to this problem</a>, but I am not qualified to judge it.</p>







  
  




  



<!--  Disqus needs `color-scheme: light;` as the base color scheme -->
<div id="disqus_thread" style="color-scheme: light;"></div>
<script>
    var disqus_config = function () {
        this.page.url = 'https://drhagen.com/blog/sane-equality/';
    };

    (function () {
        var d = document, s = d.createElement('script');

        s.src = 'https://drhagen.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();

    document.addEventListener('DOMContentLoaded', function (e) {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function () {
            // Instruct Disqus to reload after theme change
            DISQUS.reset({ reload: true, config: disqus_config });
        });
    });
</script>
<noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
        comments powered by Disqus.
    </a>
</noscript>

      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; David R Hagen. Content available under <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution CC-BY</a> license.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/drhagen" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://stackoverflow.com/users/1485877/drhagen" target="_blank" rel="noopener" title="stackoverflow.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M290.7 311 95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/drhagen" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/davidrhagen/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>